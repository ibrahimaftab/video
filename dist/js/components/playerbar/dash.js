export default async function(n){const i=n.playerbar,o=n.dashjs;var t=(await import("../utils.js"))["triggerEvent"];t((await import("../events.js")).default.initiated,n),o.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,async function(t){const e=o.getBitrateInfoListFor("video");let a=e[0].qualityIndex;t=t.streamInfo.manifestInfo.isDynamic;i.initiate(!t),o.setQualityFor("video",-1),1<e.length&&(i.createQualityDropdown(function(){e.forEach((t,e)=>{n.querySelector("dropdown #quality-list").insertAdjacentHTML("beforeend",`<button data-index="${t.qualityIndex}">${t.height}</button>`)}),n.querySelector("dropdown #quality-list").insertAdjacentHTML("beforeend",`<button class="active" data-index="-1">Auto <span class="quality-auto">${e[0].height}</span></button>`),n.querySelector("#quality-list .dropdown-back")?.addEventListener("click",()=>{const t=n.querySelector("dropdown");t.classList.contains("dropdown-active")&&(t.classList.remove("dropdown-active"),setTimeout(()=>{t.classList=[]},150))}),n.querySelectorAll("#quality-list button:not(.dropdown-back)").forEach(function(i){i.addEventListener("click",t=>{var e,t=t.target;i.classList.contains("active")||(e=t.dataset["index"],n.querySelector("#quality-list button.active").classList.remove("active"),t.classList.add("active"),n.querySelector(".quality-auto").textContent=t.textContent,a=Number(e),o.setQualityFor("video",a))})})}),n.querySelector("timeline-progressbar")?.addEventListener("click",function(){o.setQualityFor("video",a)}))})}