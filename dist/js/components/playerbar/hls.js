export default async function(i){const n=i.playerbar,a=i.hlsjs;var t=(await import("../../utils.js"))["triggerEvent"];t(events.initiated,i),a.on(Hls.Events.LEVEL_SWITCHED,async function(t,e){(0<a.currentLevel||"Auto"==i.querySelector("#quality-list.active")?.textContent)&&(i.querySelector(".quality-auto").textContent=a.levels.find((t,e)=>e===a.currentLevel).height)}),a.on(Hls.Events.BUFFER_CREATED,async function(t,e){1<a.levels.length&&n.createQualityDropdown(function(){a.levels.forEach((t,e)=>{i.querySelector("dropdown #quality-list").insertAdjacentHTML("beforeend",`<button data-id="${e}">${t.height}</button>`)}),i.querySelector("dropdown #quality-list").insertAdjacentHTML("beforeend",`<button class="active" data-id="-1">Auto <span class="quality-auto">${a.levels[0].height}</span></button>`),i.querySelectorAll("#quality-list button:not(.dropdown-back)").forEach(function(e,t){e.addEventListener("click",t=>{t=t.target;if(!e.classList.contains("active")){const n=t.dataset["id"];i.querySelector("#quality-list button.active").classList.remove("active"),t.classList.add("active"),a.currentLevel=Number(n),0<Number(n)&&(i.querySelector(".quality-auto").textContent=a.levels.find((t,e)=>e===Number(n)).height)}})})})});let l=!1;a.on(Hls.Events.LEVEL_UPDATED,async function(t,e){l||(l=!0,e=e.details.live,n.initiate(!e))})}